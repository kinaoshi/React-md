### ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
#### pages/posts/index.jsx
- pages/posts/index.jsxã‹ã‚‰
- - PostsComponentã‚’ã‚³ãƒãƒ³ãƒ‰ã‚¯ãƒªãƒƒã‚¯ã—ã¦components/Posts/index.jsxã«ç§»è¡Œ
> è¤‡æ•°å½¢ã‚’Listã«å¤‰æ›´ã™ã‚‹
- Postsã‚’PostListã«å¤‰æ›´ã™ã‚‹
- - ã“ã‚Œã‚’å‘¼ã‚“ã§ã„ã‚‹pages/posts/index.jsã®
```js
import { Posts as PostsComponent} from "src/components/Posts"
```
> ã‚’
```js
import { PostList} from "src/components/Posts"
```
>ã«å¤‰æ›´ã™ã‚‹
- pages/posts/index.jsxã®
- - PostsComponentã‚’PostListã«å¤‰æ›´
#### components/Posts/ã¨components/Post/ã®çµ±åˆ
- components/Posts/index.jsxã‚’components/Posts/PostList.jsxã«å¤‰æ›´ï¼ˆã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼‰ã™ã‚‹
- - PostList.jsxã‚’Postã«ç§»å‹•ï¼ˆã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼‰
- PostList.jsxã®
```js
const { data, error, isLoading, isEmpty } = usePosts();
```
>ã®usePosts()ã®éƒ¨åˆ†ã‚’
- useFetchArray.jsxã‹ã‚‰
- - useFetchArray(`${API_URL}/posts`)ã®éƒ¨åˆ†ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã“ã‚Œã«ç½®ãæ›ãˆã‚‹
- useFetchArray.jsxã®useFetchArrayã‚’exportã™ã‚‹
```js
export const useFetchArray = (url) => {
  const { data, error } = useSWRImmutable(url);
```
> ã¨ã—ã¦ã€PostList.jsã®useFetchArrayã¨API_URLã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹
- useFetchArray.jsxã®
```js
// export const usePosts = () => {
//   return useFetchArray(`${API_URL}/posts`);
// };
```
> ã®éƒ¨åˆ†ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ
---
#### PostsByUserId.jsx
- ctrl + shift + F ã§PostsByUserIdã‚’æ¤œç´¢
- - User/index.jsxã§PostsByUserId id={data.id}ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹
- PostsByUserId.jsxã‚’Postã«ç§»å‹•
- useFetchArray.jsxã‹ã‚‰
- - useFetchArray(id? `${API_URL}/posts?userId=${id}`:null)ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦
```js
// export const PostsByUserId = (props) => {
//   const { data, error, isLoading, isEmpty } = useFetchArray(id? `${API_URL}/posts?userId=${id}`:null);
```
> ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ
```js
const { data, error, isLoading, isEmpty } = usePostsByUserId(props.id);
```
> ã®éƒ¨åˆ†ã®ã®
```js
export const PostsByUserId = (props) => {
  const { data, error, isLoading, isEmpty } = useFetchArray(id? `${API_URL}/posts?userId=${id}`:null);
```
> useFetchArrayã¨{API_URL}ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- idã®å‰ã«props ã‚’å…¥ã‚Œã¦
```js
export const PostsByUserId = (props) => {
  const { data, error, isLoading, isEmpty } = useFetchArray(
    props.id ? `${API_URL}/posts?userId=${props.id}` : null
  );
```
> ã¨ã™ã‚‹
---
- ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å¤‰æ›´
- - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ã‚ãªã„æ–¹æ³•
> PostsByUserId.jsxã®
```js
const { data, error, isLoading, isEmpty } = useFetchArray(
    props.id ? `${API_URL}/posts?userId=${props.id}` : null
  );
 ```
 > ã®éƒ¨åˆ†ã‚’
 ```js
 const { data, error, isLoading, isEmpty } = useFetchArray(
    props.id ? `${API_URL}/users/${props.id}/posts` : null
  );
  ```
  > ã¨å¤‰æ›´ã€ã“ã‚Œã§ã§ãã¦ã„ã‚‹ãŒæ›´æ–°ã®éš›ã«ç”»é¢ãŒã‚«ã‚¯ãƒƒã¨ãªã‚‹ãŒã“ã‚Œã¯ã€ã‚­ãƒ¼(${API_URL}/users/${props.id})ã‚’å…ƒã®SWRã‹ã‚‰å¤‰æ›´ã—ãŸã“ã¨ã«ã‚ˆã‚‹ã‚‚ã®ãªã®ã§ã€ã‚³ã‚³ã‚’ä¿®æ­£ã™ã‚‹ã€‚
  - users/[id]/index.jsxã®
  ```js
  	// ãƒ¦ãƒ¼ã‚¶ã®æŠ•ç¨¿ã®å–å¾—
	const POSTS_API_URL = `${ API_URL }/posts?userId=${userData.id}`;
  ```
  >ã‚’
  ```js
  	const POSTS_API_URL = `${ API_URL }/users/${userData.id}/posts`;
   ```
   > ã¨ã‚­ãƒ¼ã‚’å¤‰æ›´ã—ãŸã®ã§ã€æ›´æ–°ã—ã¦ã‚‚ç”»é¢ã¯ã‚¹ãƒ ãƒ¼ã‚ºã«ãªã£ãŸ
   - export const PostsByUserIdã‚’PostListByUserIdã«ã™ã‚‹
   - - User/index.jsxã®PostsByUserId id={data.id}ã‚’
   ```js
   <PostListByUserId id={data.id} />
   ```
   - PostsByUserId.jsxã®ãƒ•ã‚¡ã‚¤ãƒ«åã®å¤‰æ›´
   - - PostListByUserId.jsxã«å¤‰æ›´ã™ã‚‹
   ---
   #### postsã®è©³ç´°ãƒšãƒ¼ã‚¸ã€€posts/[id]/index.jsx
   > posts/[id]/index.jsxã® ï¼œPost /ï¼ã‚’ctrl + ã‚¯ãƒªãƒƒã‚¯ã—ã¦Post/index.jsxã«ç§»å‹•
   - Post/index.jsxã§ã¯ã€usePostã‚’èª­ã¿è¾¼ã‚“ã§ã„ã‚‹ã®ã§
   - - hooks/usePost.jsxã‚’é–‹ã
   > ã“ã®ãƒšãƒ¼ã‚¸ã‚‚useFetchArrayã®ã‚ˆã†ãªæ„Ÿã˜ã§ã¾ã¨ã‚ã¦ã„ã
   - hooksã«useFetch.jsxãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
   - - ãã“ã«usePost.jsxã‚’ã‚³ãƒ”ãƒš
```js
export const usePost = (id) => {
  
  const { data, error } = useSWR(
    id
      ? `${ API_URL }/posts/${id}`
      : null
  );
 ```
 > ã®éƒ¨åˆ†ã‚’
 ```js
 export const useFetch = (url) => {
	
	const { data, error } = useSWR(url);
 ```
 - useSWR(url)ã®éƒ¨åˆ†ã‚’useSWRImmutable(url);ã¨ã—ã¦
 - - ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚‚import useSWRImmutable from "swr/immutable";ã¨ã™ã‚‹
 - import { API_URL } from "src/utils/const";ã®éƒ¨åˆ†ã¯å‰Šé™¤
 - ã“ã®useFetchã‚’ç”¨ã„ã¦è‰²ã€…ãªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã„ã
  > Post/index.jsxã®
```js
export const Post = () => {
  const router = useRouter();
const {data, error, isLoading } = usePost(router.query.id);
```
> ã‚’
```js
export const PostDetail = () => {
	const router = useRouter();
	const { data, error, isLoading } = useFetch(
		router.query.id ? `${API_URL}/posts/${router.query.id}` : null
	);
```
> ã¨å¤‰æ›´ã™ã‚‹ 
- Post/index.jsxã‚’Post/PostDetail.jsxã«ãƒ•ã‚¡ã‚¤ãƒ«åã‚’å¤‰æ›´
- posts/[id]/index.jsxã®ï¼œPost /ï¼ã‚’ï¼œPostDetail/ï¼ã«å¤‰æ›´(ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚‚)
---
> Post/PostByCommentId.jsxã®å¤‰æ›´
```js
export const PostByCommentId = (props) => {
  const { data, error, isLoading } = usePost(props.id);
```
> ã‚’
```js

export const PostTitleByCommentId = (props) => {
  const { data, error, isLoading } = usePost(props.id);
```
- Post/PostByCommentIdã‚’Post/PostTitleByCommentIdã«å¤‰æ›´
```js
export const PostTitleByCommentId = (props) => {
   const { data, error, isLoading } = usePost(props.id);
```
> ã®éƒ¨åˆ†ã‚’
```js
export const PostTitleByCommentId = (props) => {

  const { data, error, isLoading } = useFetch(
		props.id ? `${API_URL}/posts/${props.id}` : null
	);
```
> ã«å¤‰æ›´ã—ã¦ã€Postsãƒ•ã‚©ãƒ«ãƒ€ã‚’å‰Šé™¤
---
#### usersã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
> pages/users/index.jsxã®UsersComponentã¸ç§»å‹•
- Users/index.jsxã®export const UsersComponentã‚’
- - export const UsersListã«å¤‰æ›´
- - pages/users/index.jsxã®UsersComponentã‚‚UsersListã«å¤‰æ›´
- pages/users/index.jsxã‚’pages/users/UserList.jsxã«å¤‰æ›´ã—ã¦ã€Userãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•
- Usersãƒ•ã‚©ãƒ«ãƒ€ã¯å‰Šé™¤
> UsersList.jsxã®const { data, error, isLoading, isEmpty } = useUsers();ã®
- useUsersã‚’ã‚³ãƒãƒ³ãƒ‰+ ã‚¯ãƒªãƒƒã‚¯ã€€ã—ã¦ã€å‘¼ã³å‡ºã—å…ƒã¸ç§»å‹•
- useFetchArray.jsxã®useFetchArray(`${API_URL}/users`)ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦
- å…ˆç¨‹ã®useUsers()ã¨ç½®ãæ›ãˆã‚‹
- - useFetchArrayã¨{API_URL}ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
```js
//  export const useUsers = () => {
//    return useFetchArray(`${API_URL}/users`);
//  };
```
> ã®éƒ¨åˆ†ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ
---
#### ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°ãƒšãƒ¼ã‚¸
> users/[id]/index.jsxã®UserComponentã¸ç§»å‹•
- export const UserComponentã‚’export const UserDetailã«å¤‰æ›´
- - users/[id]/index.jsxã®UserComponentã‚‚UserDetailã«å¤‰æ›´
- User/index.jsxã‚’UserDetail.jsxã«åç§°å¤‰æ›´
> UserDetail.jsxã®useUser();ã®å‘¼ã³å‡ºã—å…ƒã¸ç§»å‹•
- useUser.jsxã®router.query.id ? `${API_URL}/users/${router.query.id}` : null
ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦
- - UserDetail.jsxã®useUser()ã‚’useFetch(router.query.id ? `${API_URL}/users/${router.query.id}` : null);ã«å¤‰æ›´
- const router = useRouter();ã‚’è¿½åŠ 
```js
export const UserDetail = () => {
	const router = useRouter();
	const { data, error, isLoading } = useFetch(router.query.id ? `${API_URL}/users/${router.query.id}` : null);
```
> ã¨ã™ã‚‹
---
#### UserByUserId.jsxã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
> UserByUserIdãŒä½¿ã‚ã‚Œã¦ã„ã‚‹å ´æ‰€ã‚’æ¤œç´¢
> PostDetail.jsxã§ä½¿ã‚ã‚Œã¦ã„ã‚‹
- UserByUserId.jsxã®export const UserByUserIdã®åå‰ã®å¤‰æ›´
- - export const UserNameByUserIdã¨å¤‰æ›´ã™ã‚‹
- å‘¼å‡ºå…ˆã®PostDetail.jsxã®UserByUserIdã‚’UserNameByUserIdã«å¤‰æ›´
- UserByUserId.jsxã‚’UserNameByUserId.jsxã«åç§°ã‚’å¤‰æ›´ã—ã¦
```js
const { data, error } = useSWR(
    props.id ? `${ API_URL }/users/${props.id}` : null,
    fetcher
  );
```
> ã“ã®éƒ¨åˆ†ã‚‚useFetchã«åˆ‡ã‚Šæ›¿ãˆã¦ã„ã
```js
import { API_URL } from "src/utils/const";
import { useFetch } from "src/hooks/useFetch";

export const UserNameByUserId = (props) => {
	const { data, error, isLoading } = useFetch(
		props.id ? `${API_URL}/users/${props.id}` : null
	);

	if (isLoading) {
		return <div>ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­</div>;
	}

	if (error) {
		return <div>{error.message}</div>;
	}

	return <div className="text-lg">Created by {data.name}</div>;
};

```
---
#### comments/index.jsxã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
> ã“ã‚Œã¾ã§ã¨åŒã˜ã‚ˆã†ã«ã—ã¦ã„ã
- CommentsComponentã‚’CommentListã¨å¤‰æ›´
- ã‚¤ãƒ³ãƒãƒ¼ãƒˆå…ˆã‚‚å¤‰æ›´
- Comments/index.jsxã‚’CommentList.jsxã«å¤‰æ›´ã—ã¦ã€ãƒ•ã‚©ãƒ«ãƒ€ã‚’Commentã«ç§»å‹•
- CommentList.jsxã®useComments()ã‚’useFetchArray(`${API_URL}/comments`)ã«å¤‰æ›´
```js
// export const useComments = () => {
//   return useFetchArray(`${API_URL}/comments`);
// };
```
> ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã™ã‚‹
---
> Comments/CommentsByPostId.jsxã®å¤‰æ›´
- CommentsByPostId()ã‚’CommentsListByPostId()ã«å¤‰æ›´
- - å‘¼å‡ºå…ˆã‚‚å¤‰æ›´ã™ã‚‹
- Comments/CommentsByPostId.jsxã‚’CommentsListByPostId.jsxã«åç§°ã‚’å¤‰æ›´
- - ãƒ•ã‚¡ã‚¤ãƒ«ã‚’Commentã«ç§»å‹•ã—ã¦ã€Commentsãƒ•ã‚©ãƒ«ãƒ€ã‚’å‰Šé™¤
> CommentsListByPostId.jsxã®useCommentsByPostId(props.id)ã®éƒ¨åˆ†ã‚’
- useFetchArray(id? `${API_URL}/comments?postId=${id}`:null)ã«å¤‰æ›´ã—ã¦
```js
export const CommentsListByPostId = (props) => {
  const { data, error, isLoading, isEmpty } = useFetchArray(props.id? `${API_URL}/comments?postId=${props.id}`:null);
```
> ã¨ãªã‚‹
> ã“ã‚Œã§ã‚‚è‰¯ã„ãŒã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚ˆã‚Šã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½¿ã†æ–¹ãŒã‚ã‹ã‚Šã‚„ã™ã„ã®ã§ã•ã‚‰ã«å¤‰æ›´ã™ã‚‹
- comments?postId=${props.id}ã®éƒ¨åˆ†ã‚’
- - posts/${props.id}/commentsã¨ã™ã‚‹
- useFetchArray.jsxã®ä¸è¦éƒ¨åˆ†ã¨ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆéƒ¨åˆ†ã‚’å‰Šé™¤
---
#### comments/[id]/index.jsxã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
> CommentComponentã‚’CommentDetailã«å¤‰æ›´,
> é–¢ä¿‚éƒ¨åˆ†ã‚‚å¤‰æ›´
- Comment/index.jsxã‚’CommentDetail.jsxã«å¤‰æ›´
- CommentDetail.jsxã®useComment()ã®éƒ¨åˆ†ã‚‚useFetchã‚’ä½¿ã£ã¦å¤‰æ›´ã™ã‚‹
- - const router = useRouter();ã‚’è²¼ã‚Šä»˜ã‘
```js
export const CommentDetail = () => {
	const router = useRouter();
	const { data, error, isLoading } = useFetch(router.query.id ? `${API_URL}/comments/${router.query.id}` : null);
  ```
> ã¨ã—ã¦ã€å¿…è¦éƒ¨åˆ†ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹
- useComment.jsx,useUser.jsxã‚’å‰Šé™¤
- utils/fetcher.jsã®å‰Šé™¤
- Headerã‚’Layoutã«å…¥ã‚Œã‚‹
- ï¼œHeader/ ï¼ã‚’ä½¿ç”¨éƒ¨åˆ†ã‚’å…¨ã¦å‰Šé™¤
- Layoutéƒ¨åˆ†ã‚’
```js
export const Layout = (props) => {
  return <div className="flex flex-col items-center mx-auto px-2 min-h-screen max-w-2xl ">
    <Header/>
    {props.children}</div>;
};

```
> ã«Headerã‚’å…¥ã‚Œã‚‹
- Header/index.jsxã‚’Header.jsxã«å¤‰æ›´ã—ã¦ã€Layoutãƒ•ã‚©ãƒ«ãƒ€å…¥ã‚Œã‚‹
- - Headerãƒ•ã‚©ãƒ«ãƒ€ã‚’å‰Šé™¤
- srcãƒ•ã‚©ãƒ«ãƒ€ã«layoutsãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ
- - Layoutã‚’ãã®ä¸­ã«å…¥ã‚Œã‚‹
<!-- Explorer: Compact Folders ã“ã®ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã™ã¨ä½•ã‚‚å…¥ã£ã¦ã„ãªã„ãƒ•ã‚©ãƒ«ãƒ€ã§ã‚‚éšå±¤è¡¨ç¤ºã•ã‚Œã‚‹-->
- Layoutã‚’ AppLayoutã«åç§°å¤‰æ›´
- - export const AppLayout()ã«å¤‰æ›´
- _app.jsxã‚‚å¤‰æ›´

---
>ã‚³ãƒŸãƒƒãƒˆ
- ğŸ¨ å…¨ä½“çš„ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã—ã¾ã—ãŸ































