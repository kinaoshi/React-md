### Users ã®å­ãƒšãƒ¼ã‚¸ã«"æŠ•ç¨¿"ã¨"ã‚³ãƒ¡ãƒ³ãƒˆ"ã‚’è¿½åŠ ã™ã‚‹

#### æŠ•ç¨¿ã‚’è¿½åŠ 

> User/index.jsx ã®ãƒšãƒ¼ã‚¸ã®

```js
<div>
	<h1>{data.name}</h1>
	<ul>
		<li>{data.id}</li>
		<li>{data.email}</li>
		<li>{data.username}</li>
		<li>{data.phone}</li>
		<li>{data.website}</li>
		<li>{data.company.name}</li>
	</ul>
</div>
```

> ã‚’

```js
<div>
	<h1>{data.name}</h1>
	<h2>è©³ç´°</h2>
	<ul>
		<li>{data.id}</li>
		<li>{data.email}</li>
		<li>{data.username}</li>
		<li>{data.phone}</li>
		<li>{data.website}</li>
		<li>{data.company.name}</li>
	</ul>
	<h2>æŠ•ç¨¿</h2>
</div>
```

> ã¨ã™ã‚‹

- Posts ãƒ•ã‚©ãƒ«ãƒ€ã« PostsByUserId.jsx ã‚’è¿½åŠ 
- - ãã“ã« Posts/index.jsx ã‚’å…¨ã¦ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘ã‚‹
- - export const Posts = () => {éƒ¨åˆ†ã‚’
- - export const PostsByUserId = () => {ã«å¤‰æ›´
    > PostsByUserId.jsx ã® usePosts();ã‹ã‚‰å‘¼ã³å‡ºã—å…ƒã«é£›ã¶
- useFetchArray.jsx ã«é£›ã‚“ã§ãã‚‹ã®ã§ã€ã“ã“ã®æœ€ä¸‹æ®µã«

```js
export const usePostsByUserId = (id) => {
	return useFetchArray(id ? `${API_URL}/posts?userId=${id}` : null);
};
```

- (id? `${API_URL}/posts?userId=${id}`:null)ã¯
- https://jsonplaceholder.typicode.com/posts?userId=3ã¨åŒã˜æ„å‘³
  > ã‚’è¿½åŠ ã™ã‚‹
- PostsByUserId.jsx ã®

```js
export const PostsByUserId = () => {
  const { data, error, isLoading, isEmpty } = usePosts();
```

> ã® usePosts();ã‚’ usePostsByUserId();ã«å¤‰æ›´
> import ã‚‚å¤‰æ›´ã—ã¦ãŠã
> å¼•æ•°ã‚’ props.id ã¨ã—ã¦

```js
export const PostsByUserId = (props) => {
  const { data, error, isLoading, isEmpty } = usePostsByUserId(props.id);
```

> ã¨ã™ã‚‹

- ã“ã‚Œã‚’ User/index.jsx ã§å‘¼ã³å‡ºã™

```js
<h2>æŠ•ç¨¿</h2>
<PostsByUserId id={data.id}/>
```

---

> ã“ã“ã¾ã§ã‚’ã‚³ãƒŸãƒƒãƒˆ

- âœ¨ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒšãƒ¼ã‚¸ã«æŠ•ç¨¿ä¸€è¦§ã‚’è¿½åŠ 

---

> User/index.jsx ã®ï¼œ h2 ï¼ã‚³ãƒ¡ãƒ³ãƒˆï¼œ/h2 ï¼ã®å‰Šé™¤

- ã‚³ãƒŸãƒƒãƒˆ
- ğŸ”¥ ä¸è¦ã«ãªã£ãŸã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤

---

### Comments ã®å…ƒã®è¨˜äº‹ã‚’å–å¾—ã—ã¦è¡¨ç¤ºã™ã‚‹

> Comment/index.jsx ã« User ã¨åŒã˜ã‚ˆã†ã«ï¼œ h2 ï¼å…ƒã®è¨˜äº‹ï¼œ/h2 ï¼ã‚’è¿½åŠ 

- Post ãƒ•ã‚©ãƒ«ãƒ€ã« PostByCommentId.jsx ã‚’ä½œæˆã—ã€Post/index.jsx ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘ã‚‹

  > export const Post = () => {ã‚’
  > export const PostByCommentId = () => {ã«å¤‰æ›´

- usePost.jsx ã‚’åˆ©ç”¨ã—ã¦ã€å…ƒã®è¨˜äº‹ã‚’å–å¾—ã™ã‚‹
- hooks/usePost.jsx å†…ã‚’

> ä¸‹è¨˜ã«å¤‰æ›´

```js
import useSWR from "swr";
export const usePost = (id) => {
	const { data, error } = useSWR(
		id ? `https://jsonplaceholder.typicode.com/posts/${id}` : null
	);
	return {
		data,
		error,
		isLoading: !data && !error,
	};
};
```

> ã¨ãªã‚‹ã€‚
> usePost ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹ã¨ã“ã‚ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã€
> Post/index.jsx ã§

- const {data, error, isLoading } = usePost();ã‚’
- const {data, error, isLoading } = usePost(router.query.id);ã«å¤‰æ›´

---

> ã“ã“ã¾ã§ã§ã€hooks/usePost.jsx ã® usePost ãŒæ±ç”¨çš„ã«ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã“ã‚Œã‚’ Post/PostsByUserId.jsx ã§ä½¿ãˆã° OK
> export const PostByCommentId = () => {
> const {data, error, isLoading } = usePost();ã®éƒ¨åˆ†ã‚’

- export const PostByCommentId = (props) => {
- const {data, error, isLoading } = usePost(props.id)
  > ã¨ã™ã‚‹
- ã“ã‚Œã‚’ comment/index.jsx ã§å‘¼ã³å‡ºã™

```js
<h2>å…ƒã®è¨˜äº‹</h2>
<PostByCommentId id={data.postId}/>
```

> ã¨è¨˜è¼‰ã™ã‚‹ã€‚è¨˜äº‹ãŒã ã¶ã£ã¦ã„ã‚‹ã®ã§

- Post/PostByCommentId.jsx ã®

```js
<div>
	<Head>
		<title>{data?.title}</title>
	</Head>
	<p>{data?.body}</p>
	<UserByUserId id={data.userId} />
	<CommentsByPostId id={data.id} />
</div>
```

> ã®éƒ¨åˆ†ã¯

```js
<p>{data?.body}</p>
```

> ã¨ã™ã‚‹

---

> ã‚³ãƒŸãƒƒãƒˆ

- ğŸ¨ æŠ•ç¨¿å–å¾—ã¾ã‚ã‚Šã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãŒå°‘ã—å¤‰æ›´
---

#### å…ƒã®è¨˜äº‹ã«é£›ã¹ã‚‹ã‚ˆã†ã«ã™ã‚‹
- Post/PostByCommentId.jsxã®
> return <p>{data?.title}</p>;ã®éƒ¨åˆ†ã‚’

```js
return (
	<Link href={`/posts/${data?.id}`}>
		<a>{data?.title}</a>
	</Link>
);
```

> ã¨ã™ã‚‹ã“ã¨ã§ã€å…ƒã®è¨˜äº‹ä¸€è¦§ã«é£›ã¹ã‚‹ã‚ˆã†ã«ãªã£ãŸ

---

> ã‚³ãƒŸãƒƒãƒˆ

- âœ¨ ã‚³ãƒ¡ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã§å…ƒã®æŠ•ç¨¿ã‚’è¡¨ç¤º

---

> ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

- useFetchArray
- useCommentsByPostsId ã‚’ useCommentsByPostId ã«å¤‰æ›´
- - comments/CommentsByPostId.jsx å†…ã‚‚åŒã˜ã‚ˆã†ã«å¤‰æ›´

```js
//  users

export const useUsers = () => {
	return useFetchArray(`${API_URL}/users`);
};

//  comments

export const useComments = () => {
	return useFetchArray(`${API_URL}/comments`);
};

export const useCommentsByPostId = (id) => {
	return useFetchArray(id ? `${API_URL}/comments?postId=${id}` : null);
};
```

- ğŸšš è‹±èªã®é–“é•ã„ä¿®æ­£ã€è¤‡æ•°å½¢ã‚’å˜æ•°å½¢ã«

---
